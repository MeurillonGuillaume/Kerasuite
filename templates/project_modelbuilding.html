<div class="columns">
    <div class="column col-md-12 col-6">
        <div class="accordion m-2">
            <input id="building-model-overview" type="radio" name="building-accordion" hidden="">
            <label class="accordion-header c-hand" for="building-model-overview">
                <h4>
                    <i class="icon icon-arrow-right mr-1"></i>Model overview
                </h4>
            </label>
            <div class="accordion-body">
                {% if ProjectModel is none or ProjectModel.layers|length < 1 %}
                    <p>No model has been created yet, please create a model below first.</p>
                {% else %}
                    {% for Layer in ProjectModel.layers | sort(attribute='order') %}
                        <div class="tile mb-1">
                            <div class="tile-content">
                                <div class="tile-title">{{ Layer['order'] + 1 }}. {{ Layer['layerType'] }} layer
                                    ({% for param in Layer['parameters'] %}
                                        <code>{{ param | lower }}</code>: {{ Layer['parameters'][param] }}
                                    {% endfor %})
                                </div>
                                {% if Layer['description']|length > 0 %}
                                    <small class="tile-subtitle"><b>Description:</b> {{ Layer['description'] }}</small>
                                {% endif %}
                            </div>
                            <div class="tile-action">
                                <button class="btn btn-sm btn-primary tooltip tooltip-left"
                                        data-tooltip="Edit {{ Layer['layerType'] }} layer #{{ Layer['order'] + 1 }}">
                                    <i class="icon icon-edit"></i>
                                </button>
                                <a class="btn btn-sm btn-error tooltip tooltip-left"
                                   data-tooltip="Remove {{ Layer['layerType'] }} layer #{{ Layer['order'] + 1 }}"
                                   href="/remove/layer?project={{ Projectname }}&layer={{ Layer['layerId'] }}"
                                   onclick="return confirm('Are you sure to delete this {{ Layer["layerType"] }} layer?');">
                                    <i class="icon icon-delete"></i>
                                </a>
                            </div>
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
        <div class="accordion m-2">
            <input id="building-model-add-layer" type="radio" name="building-accordion" hidden="">
            <label class="accordion-header c-hand" for="building-model-add-layer">
                <h4>
                    <i class="icon icon-arrow-right mr-1"></i>Create new layer
                </h4>
            </label>
            <div class="accordion-body">
                {{ add_form_group(CreateLayerForm.project, hidden=True, value=Projectname) }}
                {{ add_form_group(CreateLayerForm.new_layer) }}
                <button class="btn btn-success" id="btn-new-layer">Create layer</button>
            </div>
        </div>

        <div class="accordion m-2">
            <input id="building-model-set-options" type="radio" name="building-accordion" hidden="">
            <label class="accordion-header c-hand" for="building-model-set-options">
                <h4>
                    <i class="icon icon-arrow-right mr-1"></i>Set model options
                </h4>
            </label>
            <div class="accordion-body">
                <form action="/set/model/options" method="post" enctype="multipart/form-data">
                    {{ add_form_group(ModelOptionsForm.epochs) }}
                    {{ add_form_group(ModelOptionsForm.batch_size) }}
                    {{ add_form_group(ModelOptionsForm.early_stopping, is_checkbox=True) }}
                    {{ add_form_group(ModelOptionsForm.model_checkpoints, is_checkbox=True) }}
                    {{ add_form_group(ModelOptionsForm.project, hidden=True, value=Projectname) }}
                    <button class="btn btn-success" id="btn-new-layer">Set options</button>
                </form>
            </div>
        </div>
        {% if ModelOptionsForm.early_stopping.default %}
            <div class="accordion m-2">
                <input id="building-earlystop" type="radio" name="building-accordion" hidden="">
                <label class="accordion-header c-hand" for="building-earlystop">
                    <h4>
                        <i class="icon icon-arrow-right mr-1"></i>Set early stopping options
                    </h4>
                </label>
                <div class="accordion-body">
                    {{ add_form_group(EarlyStoppingForm.patience) }}
                    {{ add_form_group(EarlyStoppingForm.monitor) }}
                    {{ add_form_group(EarlyStoppingForm.mode) }}
                </div>
            </div>
        {% endif %}
        {% if ModelOptionsForm.model_checkpoints.default %}
            <div class="accordion m-2">
                <input id="building-modelcheckpoint" type="radio" name="building-accordion" hidden="">
                <label class="accordion-header c-hand" for="building-modelcheckpoint">
                    <h4>
                        <i class="icon icon-arrow-right mr-1"></i>Set model checkpoint options
                    </h4>
                </label>
                <div class="accordion-body">
                    ...
                </div>
            </div>
        {% endif %}

        <div class="accordion m-2">
            <input id="building-build" type="radio" name="building-accordion" hidden="">
            <label class="accordion-header c-hand" for="building-build">
                <h4>
                    <i class="icon icon-arrow-right mr-1"></i>Build model
                </h4>
            </label>
            <div class="accordion-body">

                <a class="btn btn-error" href="/train/model?project={{ Projectname }}">Train model</a>
            </div>
        </div>
    </div>
</div>