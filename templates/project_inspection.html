{{ Dataset | safe }}
<div class="column col-6">
    {% if DataBalance %}
        <div class="form-group">
            <label class="form-label" for="column_select">Select a column to visualize</label>
            <select class="form-select" id="columns_select">
                {% for Column in DataBalance %}
                    <option value="{{ Column }}">{{ Column }}</option>
                {% endfor %}
            </select>
        </div>

        <canvas id="canvas" style="display: block; width: 618px; height: 309px;" width="618" height="309"
                class="chartjs-render-monitor"></canvas>
    {% endif %}
</div>


<script>
    {
        let columnData = {{ DataBalance | tojson }};
        let column = Object.keys(columnData)[0];
        let chartContext = document.getElementById('canvas').getContext('2d');

        const SetGraph = () => {
            if (column in columnData) {
                if (window.barChart != null) {
                    window.barChart.destroy();
                }
                window.barChart = new Chart(chartContext, {
                    "type": "bar",
                    "data": {
                        "labels": Object.keys(columnData[column]),
                        "datasets": [{
                            "label": `Unique values for column ${column}`,
                            "data": Object.values(columnData[column]),
                            "fill": true,
                            "borderWidth": 1
                        }]
                    },
                    "options": {"scales": {"yAxes": [{"ticks": {"beginAtZero": true}}]}}
                });
            }
        };

        const GetColumnName = () => {
            column = document.getElementById('columns_select').value;
        }

        window.onload = function () {
            SetGraph();
            document.getElementById('columns_select').addEventListener("change", function () {
                GetColumnName();
                SetGraph();
            })
        };
    }
</script>